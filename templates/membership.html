{% extends "layout.html" %}

{% block content %}
<div class="text-center mb-5">
    <h1 class="display-4 fw-bold">Membership Plans</h1>
    <p class="lead">Choose the plan that works best for you</p>
</div>

<div class="row justify-content-center">
    {% for plan in plans %}
        <div class="col-md-5 mb-4">
            <div class="card h-100 {% if plan.name == 'Premium' %}shadow-lg border-primary{% else %}shadow{% endif %}">
                <div class="card-header text-center {% if plan.name == 'Premium' %}bg-primary text-white{% endif %}">
                    <h3 class="my-0 fw-normal">{{ plan.name }}</h3>
                </div>
                <div class="card-body d-flex flex-column">
                    <h1 class="card-title text-center">
                        ${{ "%.2f"|format(plan.price) }}
                        <small class="text-muted fw-light">/month</small>
                    </h1>
                    
                    <hr>
                    
                    <ul class="list-unstyled mt-3 mb-4">
                        {% for feature in plan.features %}
                            <li class="mb-2">
                                <i class="fas fa-check text-success me-2"></i> {{ feature }}
                            </li>
                        {% endfor %}
                    </ul>
                    
                    <div class="mt-auto pt-3 text-center">
                        {% if user and user.is_premium and plan.name == 'Premium' %}
                            <button class="btn btn-lg btn-outline-success w-100" disabled>
                                <i class="fas fa-check-circle me-2"></i>Current Plan
                            </button>
                        {% elif plan.name == 'Premium' %}
                            <a href="{{ url_for('upgrade_membership') }}" class="btn btn-lg btn-primary w-100">
                                <i class="fas fa-arrow-up me-2"></i>Upgrade Now
                            </a>
                        {% else %}
                            {% if user and not user.is_premium %}
                                <button class="btn btn-lg btn-outline-success w-100" disabled>
                                    <i class="fas fa-check-circle me-2"></i>Current Plan
                                </button>
                            {% else %}
                                <button class="btn btn-lg btn-outline-secondary w-100" disabled>
                                    Free Plan
                                </button>
                            {% endif %}
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    {% endfor %}
</div>

<div class="row mt-5">
    <div class="col-md-12">
        <div class="card bg-light">
            <div class="card-body">
                <h4>Compare Plans</h4>
                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Feature</th>
                                <th class="text-center">Free</th>
                                <th class="text-center">Premium</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Poem Types</td>
                                <td class="text-center">3 Basic Types</td>
                                <td class="text-center">All Categories</td>
                            </tr>
                            <tr>
                                <td>Frame Designs</td>
                                <td class="text-center">3 Basic Designs</td>
                                <td class="text-center">All Designs</td>
                            </tr>
                            <tr>
                                <td>Saved Poems</td>
                                <td class="text-center">5 Creations</td>
                                <td class="text-center">Unlimited</td>
                            </tr>
                            <tr>
                                <td>Gallery Storage</td>
                                <td class="text-center"><i class="fas fa-times text-danger"></i></td>
                                <td class="text-center"><i class="fas fa-check text-success"></i></td>
                            </tr>
                            <tr>
                                <td>AI Customization</td>
                                <td class="text-center"><i class="fas fa-times text-danger"></i></td>
                                <td class="text-center"><i class="fas fa-check text-success"></i></td>
                            </tr>
                            <tr>
                                <td>Early Access Features</td>
                                <td class="text-center"><i class="fas fa-times text-danger"></i></td>
                                <td class="text-center"><i class="fas fa-check text-success"></i></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="text-center mt-5">
    <h2>Frequently Asked Questions</h2>
    <div class="row justify-content-center mt-4">
        <div class="col-lg-8">
            <div class="accordion" id="faqAccordion">
                <div class="accordion-item">
                    <h2 class="accordion-header" id="faqOne">
                        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                            How does the membership work?
                        </button>
                    </h2>
                    <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="faqOne" data-bs-parent="#faqAccordion">
                        <div class="accordion-body">
                            Our Premium membership gives you full access to all features of Poem Vision AI. Once you subscribe, you'll have access to all poem types, frame designs, and unlimited storage for your creations.
                        </div>
                    </div>
                </div>
                
                <div class="accordion-item">
                    <h2 class="accordion-header" id="faqTwo">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                            Can I cancel my subscription?
                        </button>
                    </h2>
                    <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="faqTwo" data-bs-parent="#faqAccordion">
                        <div class="accordion-body">
                            Yes, you can cancel your Premium subscription at any time from your profile page. Your Premium benefits will continue until the end of your current billing period.
                        </div>
                    </div>
                </div>
                
                <div class="accordion-item">
                    <h2 class="accordion-header" id="faqThree">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                            What payment methods do you accept?
                        </button>
                    </h2>
                    <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="faqThree" data-bs-parent="#faqAccordion">
                        <div class="accordion-body">
                            We accept all major credit cards, including Visa, Mastercard, American Express, and Discover. Payment is processed securely through our payment processor.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}